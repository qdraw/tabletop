@model tabletop.ViewModels.HomeViewModel

@{
    ViewBag.Title = "Loading - " + @Model.Name + " (Live) - tabletop";
    ViewBag.Canonical = @Url.Action("Index", "Home", new {name = @Model.Name});

}

<nav class="primary_nav_wrap">
    <ul>
        @foreach (var item in Model.List)
        {
            if (@item == @Model.Name)
            {
                <li class="current-menu-item"><a href="@Url.Action("Index","Home", new { name = @item, date = @Model.Today } )"> @item </a></li>
            }
            else
            {
                <li><a href="@Url.Action("Index","Home", new { name = @item, date = @Model.Today } )"> @item </a></li>

            }
        }
        @*https://codepen.io/philhoyt/pen/ujHzd*@

    </ul>
</nav>

<div class="header">

    <div class="panel panel-ai-indicator">
        <div id="online-indicator" class="circle circle-big circle-blank"></div>
        <div id="offline-indicator" class="circle circle-big circle-blank"></div>
        <div id="status" class="indicator-text">.....</div>
    </div>
    <div>
        <h1 id="name">Live - @Model.Name</h1>
        <h2 id="latestactivity"> @Model.Day.Day-@Model.Day.Month-@Model.Day.Year -- @Model.IsFreeDateTime</h2>
        <div class="ai-line"></div>
        <!-- <h1 id="isfree">@Model.IsFree</h1> -->
    </div>
</div>
<div id="preloader"></div>

<div class="tooltip"></div>
<div class="databox">
    <svg id="data">
        <g class="bars"></g>
    </svg>
</div>

<a asp-controller="Home" asp-action="Index" asp-route-name="@Model.Name" asp-route-date="@Model.Yesterday">Prev</a>

@if (Model.RelativeDate != 0)
{
    <a asp-controller="Home" asp-action="Index" asp-route-name="@Model.Name" asp-route-date="@Model.Tomorrow">Next</a>
}

<script type="text/javascript">
    window.updateIsFreeEnv = {
        "url": "@Url.Action("IsFree", "Api", new { name = @Model.Name })",
        "updateInterval": 7000,
        "name": "@Model.Name"
    };
    window.drawEnv = {
        "url": "@Url.Action("EventsRecent", "Api", new { name = @Model.Name })",
        "updateInterval": 90000,
        "name": "@Model.Name",
        "relativeDate": @Model.RelativeDate
    };
</script>


<script type="text/javascript" src="@Url.Content("~/")js/vendor/d3.v4.min.js"></script>
<script type="text/javascript" src="@Url.Content("~/")js/draw.js"></script>
<script type="text/javascript" src="@Url.Content("~/")js/updateisfree.js"></script>
<script type="text/javascript" src="@Url.Content("~/")js/screensaver.js"></script>

<!-- Google Analytics. -->
<script type="text/javascript">
    (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
        e=o.createElement(i);r=o.getElementsByTagName(i)[0];
        e.src='https://www.google-analytics.com/analytics.js';
        r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
    ga('create','UA-37345867-1','auto');ga('send','pageview',{ 'page': '/special/tabletop/?name=@Model.Name&date=@Model.RelativeDate' });
</script>
<!-- end Google Analytics. -->
